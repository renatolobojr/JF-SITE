<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AjudaJF ‚Äî Central de Solidariedade ¬∑ Juiz de Fora</title>
  <meta name="description" content="Central de solidariedade para fam√≠lias atingidas pelas chuvas em Juiz de Fora, MG. Pedidos de ajuda, volunt√°rios e pontos de doa√ß√£o.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --cream:      #FAF7F2;
      --warm-white: #FFFEFB;
      --clay:       #C4714A;
      --clay-light: #E8956F;
      --clay-dark:  #A05438;
      --sand:       #E8DDD0;
      --sand-dark:  #D4C5B2;
      --earth:      #6B4F3A;
      --earth-light:#8C6F5A;
      --moss:       #4A7A5C;
      --moss-light: #EBF5EF;
      --moss-dark:  #345C42;
      --sky:        #4A7C9E;
      --sky-light:  #EFF6FB;
      --sky-dark:   #2E5F7A;
      --text:       #2C1F17;
      --text-muted: #7A6155;
      --border:     rgba(196,113,74,.15);
      --shadow:     0 4px 32px rgba(100,60,30,.10);
      --shadow-sm:  0 2px 12px rgba(100,60,30,.07);
      --radius:     20px;
      --radius-sm:  14px;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--cream);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 48px 20px 64px;
    }

    /* ‚îÄ‚îÄ AVATAR / LOGO ‚îÄ‚îÄ */
    .avatar {
      width: 80px; height: 80px; border-radius: 50%;
      background: linear-gradient(135deg, var(--clay) 0%, var(--clay-dark) 100%);
      display: flex; align-items: center; justify-content: center;
      font-size: 36px; margin-bottom: 16px;
      box-shadow: 0 4px 20px rgba(196,113,74,.35);
    }

    /* ‚îÄ‚îÄ BADGE ATIVO ‚îÄ‚îÄ */
    .badge {
      display: inline-flex; align-items: center; gap: 7px;
      background: #FFF0E8; border: 1px solid #F0C4AB;
      color: var(--clay-dark); font-size: 12px; font-weight: 600;
      padding: 5px 12px; border-radius: 999px; margin-bottom: 14px;
    }
    .pulse-dot {
      width: 7px; height: 7px; border-radius: 50%;
      background: var(--clay); animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%,100% { opacity:1; transform:scale(1); }
      50%      { opacity:.5; transform:scale(.8); }
    }

    /* ‚îÄ‚îÄ T√çTULOS ‚îÄ‚îÄ */
    h1 {
      font-family: 'Lora', serif; font-weight: 700;
      font-size: 28px; line-height: 1.2; letter-spacing: -.02em;
      color: var(--earth); text-align: center; margin-bottom: 8px;
    }
    h1 em { color: var(--clay); font-style: italic; }
    .subtitle {
      font-size: 14px; color: var(--text-muted);
      text-align: center; max-width: 320px; line-height: 1.55;
      margin-bottom: 36px;
    }

    /* ‚îÄ‚îÄ SE√á√ÉO ‚îÄ‚îÄ */
    .section-label {
      font-size: 11px; font-weight: 700; letter-spacing: .08em;
      text-transform: uppercase; color: var(--text-muted);
      margin-bottom: 12px; align-self: flex-start;
      width: 100%; max-width: 400px;
    }

    /* ‚îÄ‚îÄ CARDS PRINCIPAIS ‚îÄ‚îÄ */
    .links-group {
      display: flex; flex-direction: column; gap: 12px;
      width: 100%; max-width: 400px; margin-bottom: 10px;
    }

    .link-card {
      display: flex; align-items: center; gap: 16px;
      padding: 16px 20px; border-radius: var(--radius);
      border: 1.5px solid var(--border);
      background: var(--warm-white);
      box-shadow: var(--shadow-sm);
      text-decoration: none; color: var(--text);
      transition: transform .15s, box-shadow .15s, border-color .15s;
      cursor: pointer;
    }
    .link-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
      border-color: var(--sand-dark);
    }
    .link-card:active { transform: translateY(0); }

    .link-card.clay  { border-left: 4px solid var(--clay); }
    .link-card.moss  { border-left: 4px solid var(--moss); }

    .card-icon {
      width: 44px; height: 44px; border-radius: 14px;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px; flex-shrink: 0;
    }
    .card-icon.orange { background: #FFF0E8; }
    .card-icon.green  { background: var(--moss-light); }

    .card-text { flex: 1; }
    .card-title {
      font-family: 'Lora', serif; font-weight: 700;
      font-size: 16px; color: var(--earth); margin-bottom: 2px;
    }
    .card-desc { font-size: 12px; color: var(--text-muted); line-height: 1.4; }

    .card-arrow {
      font-size: 18px; color: var(--sand-dark);
      transition: transform .15s, color .15s;
    }
    .link-card:hover .card-arrow { transform: translateX(3px); color: var(--clay); }
    .link-card.moss:hover  .card-arrow { color: var(--moss); }
    .link-card.danger:hover .card-arrow { color: var(--danger); }
    .link-card.sky:hover   .card-arrow { color: var(--sky-dark); }
    .link-card.danger { border-left: 4px solid var(--danger); }
    .link-card.sky    { border-left: 4px solid #2563EB; }
    .card-icon.red    { background: var(--danger-bg); }
    .card-icon.blue   { background: #EFF6FF; }

    /* ‚îÄ‚îÄ CONTADOR ‚îÄ‚îÄ */
    .counter-row {
      display: flex; gap: 8px; margin-bottom: 36px;
      width: 100%; max-width: 400px;
    }
    .counter-pill {
      flex: 1; background: var(--warm-white); border: 1px solid var(--border);
      border-radius: var(--radius-sm); padding: 10px 12px; text-align: center;
      box-shadow: var(--shadow-sm);
    }
    .counter-num {
      font-family: 'Lora', serif; font-weight: 700;
      font-size: 22px; color: var(--earth); display: block;
      min-height: 28px;
    }
    .counter-num.loading { color: var(--sand-dark); font-size: 14px; padding-top: 4px; }
    .counter-label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

    /* ‚îÄ‚îÄ PARCEIROS ‚îÄ‚îÄ */
    .partners-group {
      display: flex; flex-direction: column; gap: 10px;
      width: 100%; max-width: 400px; margin-bottom: 36px;
    }

    .partner-card {
      display: flex; align-items: center; gap: 14px;
      padding: 13px 16px; border-radius: var(--radius-sm);
      border: 1px solid var(--border); background: var(--warm-white);
      box-shadow: var(--shadow-sm); text-decoration: none; color: var(--text);
      transition: transform .15s, box-shadow .15s, border-color .15s;
    }
    .partner-card:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
      border-color: var(--sand-dark);
    }
    .partner-icon {
      width: 36px; height: 36px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px; flex-shrink: 0; background: var(--sky-light);
    }
    .partner-text { flex: 1; }
    .partner-name { font-size: 14px; font-weight: 600; color: var(--earth); }
    .partner-url  { font-size: 11px; color: var(--text-muted); margin-top: 1px; }
    .partner-ext  { font-size: 13px; color: var(--sand-dark); }

    /* ‚îÄ‚îÄ DIVIDER ‚îÄ‚îÄ */
    .divider {
      width: 100%; max-width: 400px;
      height: 1px; background: var(--border);
      margin: 8px 0 24px;
    }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    .footer {
      margin-top: auto; padding-top: 40px;
      font-size: 12px; color: var(--text-muted);
      text-align: center; line-height: 1.7;
    }
    .footer a { color: var(--clay); text-decoration: underline; }
    .emergency {
      display: inline-flex; gap: 16px; flex-wrap: wrap; justify-content: center;
      background: var(--warm-white); border: 1px solid var(--border);
      border-radius: var(--radius-sm); padding: 10px 16px;
      font-size: 13px; font-weight: 600; color: var(--earth);
      margin-bottom: 16px;
    }
  </style>
</head>

<body>

  <!-- Avatar -->
  <div class="avatar">ü§ù</div>

  <!-- Badge -->
  <div class="badge">
    <div class="pulse-dot"></div>
    Ativo agora ‚Äî Juiz de Fora, MG
  </div>

  <!-- T√≠tulo -->
  <h1>AjudaJF<br><em>Central de Solidariedade</em></h1>
  <p class="subtitle">Conectando fam√≠lias atingidas pelas chuvas com volunt√°rios, doa√ß√µes e recursos em Juiz de Fora.</p>

  <!-- Contadores em tempo real -->
  <div class="counter-row">
    <div class="counter-pill">
      <span class="counter-num loading" id="cntRequests">‚Ä¶</span>
      <div class="counter-label">Pedidos abertos</div>
    </div>
    <div class="counter-pill">
      <span class="counter-num loading" id="cntPoints">‚Ä¶</span>
      <div class="counter-label">Pontos de doa√ß√£o</div>
    </div>
    <div class="counter-pill">
      <span class="counter-num loading" id="cntVols">‚Ä¶</span>
      <div class="counter-label">Volunt√°rios</div>
    </div>
    <div class="counter-pill">
      <span class="counter-num loading" id="cntVis">‚Ä¶</span>
      <div class="counter-label">Vistorias abertas</div>
    </div>
  </div>

  <!-- P√°ginas do AjudaJF -->
  <p class="section-label">Acesse as plataformas</p>
  <div class="links-group">

    <a href="pedidos.html" class="link-card clay">
      <div class="card-icon orange">üôè</div>
      <div class="card-text">
        <div class="card-title">Pedidos de Ajuda</div>
        <div class="card-desc">Fa√ßa check-in, veja o mapa de necessidades e pontos de doa√ß√£o</div>
      </div>
      <span class="card-arrow">‚Ä∫</span>
    </a>

    <a href="voluntarios.html" class="link-card moss">
      <div class="card-icon green">üôã</div>
      <div class="card-text">
        <div class="card-title">Volunt√°rios</div>
        <div class="card-desc">Cadastre-se ou encontre volunt√°rios dispon√≠veis na sua regi√£o</div>
      </div>
      <span class="card-arrow">‚Ä∫</span>
    </a>

    <a href="vistoria.html" class="link-card danger">
      <div class="card-icon red">üèö</div>
      <div class="card-text">
        <div class="card-title">Vistoria T√©cnica</div>
        <div class="card-desc">Im√≥vel danificado? Solicite visita de t√©cnico, engenheiro ou Defesa Civil</div>
      </div>
      <span class="card-arrow">‚Ä∫</span>
    </a>

    <a href="riscos.html" class="link-card sky">
      <div class="card-icon blue">‚õ∞</div>
      <div class="card-text">
        <div class="card-title">√Åreas de Risco Geol√≥gico</div>
        <div class="card-desc">Mapa oficial de risco geol√≥gico e hidrol√≥gico de Juiz de Fora</div>
      </div>
      <span class="card-arrow">‚Ä∫</span>
    </a>

  </div>

  <div class="divider"></div>

  <!-- Sites parceiros -->
  <p class="section-label">Sites parceiros</p>
  <div class="partners-group">

    <a href="https://interdicoesjf.manus.space/" target="_blank" rel="noopener" class="partner-card">
      <div class="partner-icon">üöß</div>
      <div class="partner-text">
        <div class="partner-name">Interdi√ß√µes de Vias ‚Äî JF</div>
        <div class="partner-url">interdicoesjf.manus.space</div>
      </div>
      <span class="partner-ext">‚Üó</span>
    </a>

    <a href="https://sosminas.growberry.com.br/" target="_blank" rel="noopener" class="partner-card">
      <div class="partner-icon">üÜò</div>
      <div class="partner-text">
        <div class="partner-name">Ajuda Solid√°ria SOS Minas Gerais</div>
        <div class="partner-url">sosminas.growberry.com.br</div>
      </div>
      <span class="partner-ext">‚Üó</span>
    </a>

    <a href="https://www.pjf.mg.gov.br/" target="_blank" rel="noopener" class="partner-card">
      <div class="partner-icon">üèõ</div>
      <div class="partner-text">
        <div class="partner-name">Prefeitura de Juiz de Fora</div>
        <div class="partner-url">pjf.mg.gov.br</div>
      </div>
      <span class="partner-ext">‚Üó</span>
    </a>

  </div>

  <!-- Emerg√™ncia -->
  <div class="emergency">
    ‚ö†Ô∏è Risco de vida?
    <span>Defesa Civil <strong>199</strong></span>
    <span>Bombeiros <strong>193</strong></span>
    <span>SAMU <strong>192</strong></span>
  </div>

  <!-- Footer -->
  <div class="footer">
    Desenvolvido por <a href="https://www.linkedin.com/in/jonathan-coelho-06a91014b/" target="_blank" rel="noopener">Jonathan Coelho</a><br>
    Dados via Google Sheets ‚Ä¢ Use com responsabilidade
  </div>

</body>

<script>
  /* =====================================================
     CONFIG ‚Äî mesma URL do Apps Script
  ===================================================== */
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwXjWoPo48vMVLNb_bccZsdhcQ9Rg260-xr_nzc6yZT5387dcTOqiv2wi5PHmoF03Dv/exec";

  /* =====================================================
     JSONP helper
  ===================================================== */
  function jsonp(url) {
    return new Promise((resolve, reject) => {
      const cb = "cb_" + Math.random().toString(36).slice(2);
      window[cb] = (data) => { resolve(data); cleanup(); };
      const s = document.createElement("script");
      s.src = url + (url.includes("?") ? "&" : "?") + "callback=" + cb;
      s.onerror = () => { reject(new Error("falha")); cleanup(); };
      document.body.appendChild(s);
      function cleanup() { delete window[cb]; s.remove(); }
    });
  }

  /* =====================================================
     PREFETCH ‚Äî carrega dados das outras p√°ginas em
     background e salva no sessionStorage para que
     pedidos.html e voluntarios.html n√£o precisem
     fazer novas requisi√ß√µes ao abrir
  ===================================================== */
  async function prefetchAll() {
    try {
      const [a, b, c, d] = await Promise.all([
        jsonp(WEB_APP_URL + "?action=listRequests"),
        jsonp(WEB_APP_URL + "?action=listPoints"),
        jsonp(WEB_APP_URL + "?action=listVolunteers"),
        jsonp(WEB_APP_URL + "?action=listVistorias")
      ]);

      const ts = Date.now();
      if (a.ok) sessionStorage.setItem("ajudajf_requests",  JSON.stringify({ ts, data: a.data }));
      if (b.ok) sessionStorage.setItem("ajudajf_points",    JSON.stringify({ ts, data: b.data }));
      if (c.ok) sessionStorage.setItem("ajudajf_vols",      JSON.stringify({ ts, data: c.data }));
      if (d.ok) sessionStorage.setItem("ajudajf_vistorias", JSON.stringify({ ts, data: d.data }));

      if (a.ok) {
        const open = (a.data || []).filter(r => r.status === "open").length;
        document.getElementById("cntRequests").textContent = open;
        document.getElementById("cntRequests").classList.remove("loading");
      }
      if (b.ok) {
        document.getElementById("cntPoints").textContent = (b.data || []).length;
        document.getElementById("cntPoints").classList.remove("loading");
      }
      if (c.ok) {
        document.getElementById("cntVols").textContent = (c.data || []).length;
        document.getElementById("cntVols").classList.remove("loading");
      }
      if (d.ok) {
        const pending = (d.data || []).filter(v => v.status === "pending").length;
        document.getElementById("cntVis").textContent = pending;
        document.getElementById("cntVis").classList.remove("loading");
      }
    } catch {
      // falha silenciosa ‚Äî contadores ficam como "‚Ä¶"
      // as outras p√°ginas carregam normalmente por conta pr√≥pria
    }
  }

  document.addEventListener("DOMContentLoaded", prefetchAll);
</script>

</html>
